"use strict";(function(){var n=["elevator.jpg","hand.png","last-1.png","last-2.png","last-3.png","last-4.png","last-5.png","light-by.png","light-sp.png","light-ss.png","light-sy.png","light-sz.png","light-tc.png","modal-lottery.png","modal-que-by.png","modal-que-sp.png","modal-que-ss.png","modal-que-sy.png","modal-que-sz.png","modal-que-tc.png","modal-tip.png","right.png","wrong.png"],t=document.getElementById("bgm-c"),e=document.getElementById("bgm-gk"),o=document.getElementById("bgm-hp"),i=document.getElementById("bgm-rsj"),a=document.getElementById("bgm-tx"),u=document.getElementById("bgm-td"),s=document.getElementById("bgm-xp");t.play(),t.pause(),document.addEventListener("WeixinJSBridgeReady",function(){t.play(),t.pause()},!1);var l=function(){function n(){h.currentTime=17}function l(){requestAnimationFrame(function(){if(h.currentTime>=7&&h.addEventListener("click",n,{once:!0}),h.currentTime>=17)return void h.removeEventListener("click",n);l()})}function d(){if(w.addClass("active"+v),E&&(B++,b=Math.floor(r(B,50,500,L)),B==L))return E=!1,void setTimeout(function(){T=!0,$(".modal-lottery").hide()},1e3);setTimeout(function(){w.removeClass("active"+v),v++,5===v&&(v=0),d()},b)}function r(n,t,e,o){return e*(n/=o)*n*n*n*n+t}function c(n,t){return n>t?n-t:n<t?5-t+n:0}function p(){T&&(T=!1,E=!1,q=0,L=0,B=0,b=50,d())}function g(){T||E||(q=Math.floor(5*Math.random()),E=!0,L=c(q,v)+5)}var m,f=!1;$(".orientLayer").on("touchstart",function(){return!1});var h=document.getElementById("video");h.addEventListener("click",function(){h.paused&&h.play()}),$(".startLayer").on("click",function(){$(this).hide(),$("#video").addClass("opacity").show(),h.play(),l()}),h.addEventListener("ended",function(){$("#video").hide(),$("#pano").addClass("opacity").show(),t.play(),f=!0}),embedpano({swf:"tour.swf",xml:"tour.xml",target:"pano",html5:"auto",mobilescale:1,passQueryParameters:!0,consolelog:!0,onready:function(n){m=n}}),window.inCorridor=function(){e.pause(),o.pause(),i.pause(),a.pause(),u.pause(),s.pause(),f&&t.play()},window.inGK=function(){t.pause(),e.play()},window.inRSJ=function(){t.pause(),i.play()},window.inTX=function(){t.pause(),a.play()},window.inHP=function(){t.pause(),o.play()},window.inXP=function(){t.pause(),s.play()};var y=0;window.inTD=function(){t.pause(),u.play(),setTimeout(function(){$(".modal-tip").show()},1e3),y=0},window.openQue=function(n){$(".modal-que-"+n).show()},$(".modal-tip").click(function(){$(this).hide()}),$(".modal-que .answer").click(function(){var n=this,t=$(this).attr("data-right");t?($(this).addClass("right"),setTimeout(function(){$(n).removeClass("right"),$(".modal-que").hide(),m.call("set(hotspot[light-"+t+"].visible,false);"),y++,6===y?$(".modal-lottery").show():($(".last-"+(6-y)).show(),setTimeout(function(){$(".last-"+(6-y)).hide()},1e3))},1e3)):($(this).addClass("wrong"),setTimeout(function(){$(n).removeClass("wrong")},1e3))}),$(".btn-lottery").click(function(){T&&(p(),setTimeout(function(){g()},2e3))});var v=0,w=$(".active"),b=50,E=!1,T=!0,q=0,L=0,B=0};!function(t){function e(n){console.log("error:",n)}function o(n){var t=100*a.progress;$(".loadingLayout .count").text(t.toFixed()+"%")}function i(){$(".loadingLayout").hide(),t()}if(0==n.length)return void i();var a=new createjs.LoadQueue(!1,"./assets/");a.on("error",e),a.on("progress",o),a.on("complete",i);for(var u=0;u<n.length;u++)a.loadFile(n[u])}(function(){l()})}).call(void 0);