"use strict";(function(){var t=["elevator.jpg","hand.png","last-1.png","last-2.png","last-3.png","last-4.png","last-5.png","light-by.png","light-sp.png","light-ss.png","light-sy.png","light-sz.png","light-tc.png","modal-lottery.png","modal-que-by.png","modal-que-sp.png","modal-que-ss.png","modal-que-sy.png","modal-que-sz.png","modal-que-tc.png","modal-tip.png","right.png","wrong.png"],e=function(){function t(){if(c.addClass("active"+u),p&&(v++,g=Math.floor(e(v,50,500,f)),v==f))return p=!1,void setTimeout(function(){h=!0,$(".modal-lottery").hide()},1e3);setTimeout(function(){c.removeClass("active"+u),u++,5===u&&(u=0),t()},g)}function e(t,e,o,n){return o*(t/=n)*t*t*t*t+e}function o(t,e){return t>e?t-e:t<e?5-e+t:0}function n(){h&&(h=!1,p=!1,m=0,f=0,v=0,g=50,t())}function i(){h||p||(m=Math.floor(5*Math.random()),p=!0,f=o(m,u)+5)}var a,s=document.getElementById("bgm");$(".orientLayer").on("touchstart",function(){return!1});var l=document.getElementById("video1"),d=document.getElementById("video2");$(".startLayer").on("click",function(){$(this).hide(),$("#video1").addClass("opacity").show(),l.play()}),l.addEventListener("ended",function(){$("#video1").hide(),$(".elevator").addClass("opacity").show(),s.play()}),$(".elevator").on("click",function(){$(this).hide(),s.pause(),$("#video2").addClass("opacity").show(),d.play()}),d.addEventListener("ended",function(){$("#video2").hide(),$("#pano").addClass("opacity").show()}),embedpano({swf:"tour.swf",xml:"tour.xml",target:"pano",html5:"auto",mobilescale:1,passQueryParameters:!0,consolelog:!0,onready:function(t){a=t}}),window.openQue=function(t){$(".modal-que-"+t).show()};var r=0;window.inTD=function(t){$(".modal-tip").show(),r=0},$(".modal-tip").click(function(){$(this).hide()}),$(".modal-que .answer").click(function(){var t=this,e=$(this).attr("data-right");e?($(this).addClass("right"),setTimeout(function(){$(t).removeClass("right"),$(".modal-que").hide(),a.call("set(hotspot[light-"+e+"].visible,false);"),r++,6===r?$(".modal-lottery").show():($(".last-"+(6-r)).show(),setTimeout(function(){$(".last-"+(6-r)).hide()},1e3))},1e3)):($(this).addClass("wrong"),setTimeout(function(){$(t).removeClass("wrong")},1e3))}),$(".btn-lottery").click(function(){h&&(n(),setTimeout(function(){i()},2e3))});var u=0,c=$(".active"),g=50,p=!1,h=!0,m=0,f=0,v=0},o=document.getElementById("bgm");document.addEventListener("WeixinJSBridgeReady",function(){o.play(),o.pause()},!1),function(e){function o(t){console.log("error:",t)}function n(t){var e=100*a.progress;$(".loadingLayout .count").text(e.toFixed()+"%")}function i(){$(".loadingLayout").hide(),e()}if(0==t.length)return void i();var a=new createjs.LoadQueue(!1,"./assets/");a.on("error",o),a.on("progress",n),a.on("complete",i);for(var s=0;s<t.length;s++)a.loadFile(t[s])}(function(){e()})}).call(void 0);